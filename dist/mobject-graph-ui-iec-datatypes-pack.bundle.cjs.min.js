/**
 * MIT License
 *
 * Copyright (c) 2024 benhar-dev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("mobject-graph-ui");function t(e,t,n){return t=r(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],r(e).constructor):t.apply(e,n))}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,p(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var c=function(){function o(i,r,u){var a,l,p;n(this,o),p=t(this,o,[i,r,u]);var c=(null==u||null===(a=u.content)||void 0===a?void 0:a.defaultValue)||!1,s=(null==u||null===(l=u.content)||void 0===l||null===(l=l.datatype)||void 0===l?void 0:l.typeName)||"",d=new e.ColorGenerator(s);return p.ledComponent=new e.LedComponent(i,c,d),p}return u(o,e.DisplayWidget),i(o,[{key:"onContentUpdate",value:function(e){this.ledComponent.isActive=e}},{key:"computeSize",value:function(){return this.ledComponent.computeSize()}},{key:"draw",value:function(e,t,n,o,i){this.ledComponent.draw(e,t,n,o,i)}}])}(),s=function(){function o(i,r,u){var a,l,p;n(this,o),p=t(this,o,[i,r,u]);var c=(null==u||null===(a=u.parameter)||void 0===a?void 0:a.defaultValue)||!1,s=(null==u||null===(l=u.parameter)||void 0===l||null===(l=l.datatype)||void 0===l?void 0:l.typeName)||"",d=new e.ColorGenerator(s);return p.checkboxComponent=new e.CheckboxComponent(i,c,d),p.checkboxComponent.on("onChange",(function(e){p.setValue(e)})),p}return u(o,e.ControlWidget),i(o,[{key:"computeSize",value:function(){return this.checkboxComponent.computeSize()}},{key:"mouse",value:function(e,t,n){this.checkboxComponent.onMouse(e,t)}},{key:"draw",value:function(e,t,n,o,i){this.checkboxComponent.draw(e,t,n,o,i)}}])}(),d=function(){return i((function e(t){var o;n(this,e),this.content=t,this.metadata=new Map((null!==(o=t.metadata)&&void 0!==o?o:[]).map((function(e){return[e.name.toLowerCase(),e.value]}))),this.datatype=t.datatype||{}}),[{key:"precision",get:function(){return this.getMetadataOrDefault("precision",this.datatype.isFloat?2:0)}},{key:"defaultValue",get:function(){var e;return(null===(e=this.content)||void 0===e?void 0:e.defaultValue)||0}},{key:"getMetadataOrDefault",value:function(e,t){return this.metadata.get(e.toLowerCase())||t}}])}(),y=function(){return i((function e(t){var o;n(this,e),this.parameter=t,this.metadata=new Map((null!==(o=t.metadata)&&void 0!==o?o:[]).map((function(e){return[e.name.toLowerCase(),e.value]}))),this.datatype=t.datatype||{}}),[{key:"minimumValue",get:function(){return this.getMetadataOrDefault("minimumValue",this.datatype.minValue||0)}},{key:"maximumValue",get:function(){return this.getMetadataOrDefault("maximumValue",this.datatype.maxValue||0)}},{key:"precision",get:function(){return this.getMetadataOrDefault("precision",this.datatype.isFloat?2:0)}},{key:"onlyOdd",get:function(){return this.getMetadataOrDefault("onlyOdd",!1)}},{key:"onlyEven",get:function(){return this.getMetadataOrDefault("onlyEven",!1)}},{key:"defaultValue",get:function(){return this.parameter.defaultValue}},{key:"getMetadataOrDefault",value:function(e,t){return this.metadata.get(e.toLowerCase())||t}},{key:"getNumberLimiter",value:function(){var t=null;return this.onlyOdd?t="odd":this.onlyEven&&(t="even"),new e.NumberLimiter(this.minimumValue,this.maximumValue,this.defaultValue,t,this.precision)}}])}(),m=function(){function o(i,r,u){var a,l;n(this,o),l=t(this,o,[i,r,u]);var p=new d(u.content),c=p.defaultValue,s=p.precision,y=(null==u||null===(a=u.content)||void 0===a||null===(a=a.datatype)||void 0===a?void 0:a.typeName)||"",m=new e.ColorGenerator(y);return l.numericDisplayComponent=new e.NumericDisplayComponent(i,c,s,m),l}return u(o,e.DisplayWidget),i(o,[{key:"onContentUpdate",value:function(e){this.numericDisplayComponent.value=e}},{key:"computeSize",value:function(){return this.numericDisplayComponent.computeSize()}},{key:"draw",value:function(e,t,n,o,i){this.numericDisplayComponent.draw(e,t,n,o,i)}}])}(),f=function(){function o(i,r,u){var a,l;n(this,o),l=t(this,o,[i,r,u]);var p=new y(u.parameter),c=p.defaultValue,s=p.precision,d=p.getNumberLimiter(),m=(null==u||null===(a=u.parameter)||void 0===a||null===(a=a.datatype)||void 0===a?void 0:a.typeName)||"",f=new e.ColorGenerator(m);return l.numericInputComponent=new e.NumericInputComponent(i,c,s,d,f),l.numericInputComponent.on("onChange",(function(e){l.setValue(e)})),l}return u(o,e.ControlWidget),i(o,[{key:"computeSize",value:function(){return this.numericInputComponent.computeSize()}},{key:"mouse",value:function(e,t,n){this.numericInputComponent.onMouse(e,t,n)}},{key:"draw",value:function(e,t,n,o,i){this.numericInputComponent.draw(e,t,n,o,i)}}])}(),v=function(){function o(i,r,u){var a,l,p;n(this,o),p=t(this,o,[i,r,u]);var c=(null==u||null===(a=u.content)||void 0===a?void 0:a.defaultValue)||"",s=(null==u||null===(l=u.content)||void 0===l||null===(l=l.datatype)||void 0===l?void 0:l.typeName)||"",d=new e.ColorGenerator(s);return p.textDisplayComponent=new e.SingleLineTextDisplayComponent(i,c,d),p}return u(o,e.DisplayWidget),i(o,[{key:"onContentUpdate",value:function(e){this.textDisplayComponent.text=e}},{key:"computeSize",value:function(){return this.textDisplayComponent.computeSize()}},{key:"draw",value:function(e,t,n,o,i){this.textDisplayComponent.draw(e,t,n,o,i)}}])}(),g=function(){function o(i,r,u){var a,l,p;n(this,o),p=t(this,o,[i,r,u]);var c=(null==u||null===(a=u.parameter)||void 0===a?void 0:a.defaultValue)||"",s=(null==u||null===(l=u.parameter)||void 0===l||null===(l=l.datatype)||void 0===l?void 0:l.typeName)||"",d=new e.ColorGenerator(s);return p.textInputComponent=new e.SingleLineTextInputComponent(i,c,d),p.textInputComponent.on("onChange",(function(e){p.setValue(e)})),p}return u(o,e.ControlWidget),i(o,[{key:"computeSize",value:function(){return this.textInputComponent.computeSize()}},{key:"mouse",value:function(e,t,n){this.textInputComponent.onMouse(e,t)}},{key:"draw",value:function(e,t,n,o,i){this.textInputComponent.draw(e,t,n,o,i)}}])}(),h=function(){function o(i,r,u){var a,l,p;n(this,o),p=t(this,o,[i,r,u]);var c=(null==u||null===(a=u.content)||void 0===a?void 0:a.defaultValue)||"",s=(null==u||null===(l=u.content)||void 0===l||null===(l=l.datatype)||void 0===l?void 0:l.typeName)||"",d=new e.ColorGenerator(s);return p.textDisplayComponent=new e.SingleLineTextDisplayComponent(i,c,d),p}return u(o,e.DisplayWidget),i(o,[{key:"onContentUpdate",value:function(e){this.textDisplayComponent.text=e}},{key:"computeSize",value:function(){return this.textDisplayComponent.computeSize()}},{key:"draw",value:function(e,t,n,o,i){this.textDisplayComponent.draw(e,t,n,o,i)}}])}(),C=function(){function o(i,r,u){var a,l,p,c;n(this,o),c=t(this,o,[i,r,u]);var s=(null==u||null===(a=u.parameter)||void 0===a?void 0:a.defaultValue)||"",d=(null==u||null===(l=u.parameter)||void 0===l||null===(l=l.datatype)||void 0===l?void 0:l.enumerations)||[],y=(null==u||null===(p=u.parameter)||void 0===p||null===(p=p.datatype)||void 0===p?void 0:p.typeName)||"",m=new e.ColorGenerator(y);return c.comboboxComponent=new e.ComboboxComponent(i,s,d,m),c.comboboxComponent.on("onChange",(function(e){c.setValue(e)})),c}return u(o,e.ControlWidget),i(o,[{key:"computeSize",value:function(){return this.comboboxComponent.computeSize()}},{key:"mouse",value:function(e,t,n){this.comboboxComponent.onMouse(e,t)}},{key:"draw",value:function(e,t,n,o,i){this.comboboxComponent.draw(e,t,n,o,i)}}])}(),T=function(){return i((function e(){n(this,e)}),[{key:"install",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.GraphFramework,n=arguments.length>1?arguments[1]:void 0;this.registerWidgets(t,n)}},{key:"registerWidgets",value:function(e,t){e.registerWidgetType(s,"BOOL"),e.registerWidgetType(c,"BOOL"),e.registerWidgetType(f,"BYTE"),e.registerWidgetType(m,"BYTE"),e.registerWidgetType(f,"WORD"),e.registerWidgetType(m,"WORD"),e.registerWidgetType(f,"DWORD"),e.registerWidgetType(m,"DWORD"),e.registerWidgetType(f,"LWORD"),e.registerWidgetType(m,"LWORD"),e.registerWidgetType(f,"INT"),e.registerWidgetType(m,"INT"),e.registerWidgetType(f,"LINT"),e.registerWidgetType(m,"LINT"),e.registerWidgetType(f,"DINT"),e.registerWidgetType(m,"DINT"),e.registerWidgetType(f,"SINT"),e.registerWidgetType(m,"SINT"),e.registerWidgetType(f,"USINT"),e.registerWidgetType(m,"USINT"),e.registerWidgetType(f,"UINT"),e.registerWidgetType(m,"UINT"),e.registerWidgetType(f,"UDINT"),e.registerWidgetType(m,"UDINT"),e.registerWidgetType(f,"ULINT"),e.registerWidgetType(m,"ULINT"),e.registerWidgetType(f,"REAL"),e.registerWidgetType(m,"REAL"),e.registerWidgetType(f,"LREAL"),e.registerWidgetType(m,"LREAL"),e.registerWidgetType(g,"STRING"),e.registerWidgetType(v,"STRING"),e.registerWidgetType(C,"ENUM","*"),e.registerWidgetType(h,"ENUM","*")}}])}();exports.IecDatatypesPack=T;
