/**
 * MIT License
 *
 * Copyright (c) 2024 benhar-dev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mobject-graph-ui")):"function"==typeof define&&define.amd?define(["exports","mobject-graph-ui"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MobjectGraphUiIecDatatypesPack={},e.MobjectGraphUi)}(this,(function(e,t){"use strict";class n extends t.DisplayWidget{constructor(e,n,o){super(e,n,o);const i=o?.content?.defaultValue||!1,a=o?.content?.datatype?.typeName||"",r=new t.ColorGenerator(a);this.ledComponent=new t.LedComponent(e,i,r),this.on("valueChanged",((e,t)=>{this.ledComponent.isActive=e}))}computeSize(){return this.ledComponent.computeSize()}draw(e,t,n,o,i){this.ledComponent.draw(e,t,n,o,i)}}class o extends t.ControlWidget{constructor(e,n,o){super(e,n,o);const i=o?.parameter?.defaultValue||!1,a=o?.parameter?.datatype?.typeName||"",r=new t.ColorGenerator(a);this.checkboxComponent=new t.CheckboxComponent(e,i,r),this.on("valueChanged",((e,t)=>{this.checkboxComponent.isChecked=e})),this.checkboxComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.checkboxComponent.computeSize()}mouse(e,t,n){this.checkboxComponent.onMouse(e,t)}draw(e,t,n,o,i){this.checkboxComponent.draw(e,t,n,o,i)}}class i{constructor(e){this.content=e,this.metadata=new Map((e.metadata??[]).map((e=>[e.name.toLowerCase(),e.value]))),this.datatype=e.datatype||{}}get precision(){return this.getMetadataOrDefault("precision",this.datatype.isFloat?2:0)}get defaultValue(){return this.content?.defaultValue||0}getMetadataOrDefault(e,t){return this.metadata.get(e.toLowerCase())||t}}class a{constructor(e){this.parameter=e,this.metadata=new Map((e.metadata??[]).map((e=>[e.name.toLowerCase(),e.value]))),this.datatype=e.datatype||{}}get minimumValue(){return this.getMetadataOrDefault("minimumValue",this.datatype.minValue||0)}get maximumValue(){return this.getMetadataOrDefault("maximumValue",this.datatype.maxValue||0)}get precision(){return this.getMetadataOrDefault("precision",this.datatype.isFloat?2:0)}get onlyOdd(){return this.getMetadataOrDefault("onlyOdd",!1)}get onlyEven(){return this.getMetadataOrDefault("onlyEven",!1)}get defaultValue(){return this.parameter.defaultValue}getMetadataOrDefault(e,t){return this.metadata.get(e.toLowerCase())||t}getNumberLimiter(){let e=null;return this.onlyOdd?e="odd":this.onlyEven&&(e="even"),new t.NumberLimiter(this.minimumValue,this.maximumValue,this.defaultValue,e,this.precision)}}class r extends t.DisplayWidget{constructor(e,n,o){super(e,n,o);const a=new i(o.content),r=a.defaultValue,s=a.precision,p=o?.content?.datatype?.typeName||"",u=new t.ColorGenerator(p);this.numericDisplayComponent=new t.NumericDisplayComponent(e,r,s,u),this.on("valueChanged",((e,t)=>{this.numericDisplayComponent.value=e}))}computeSize(){return this.numericDisplayComponent.computeSize()}draw(e,t,n,o,i){this.numericDisplayComponent.draw(e,t,n,o,i)}}class s extends t.ControlWidget{constructor(e,n,o){super(e,n,o);const i=new a(o.parameter),r=i.defaultValue,s=i.precision,p=i.getNumberLimiter(),u=o?.parameter?.datatype?.typeName||"",m=new t.ColorGenerator(u);this.numericInputComponent=new t.NumericInputComponent(e,r,s,p,m),this.on("valueChanged",((e,t)=>{this.numericInputComponent.value=e})),this.numericInputComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.numericInputComponent.computeSize()}mouse(e,t,n){this.numericInputComponent.onMouse(e,t,n)}draw(e,t,n,o,i){this.numericInputComponent.draw(e,t,n,o,i)}}class p extends t.DisplayWidget{constructor(e,n,o){super(e,n,o);const i=o?.content?.defaultValue||"",a=o?.content?.datatype?.typeName||"",r=new t.ColorGenerator(a);this.textDisplayComponent=new t.SingleLineTextDisplayComponent(e,i,r),this.on("valueChanged",((e,t)=>{this.textDisplayComponent.text=e}))}computeSize(){return this.textDisplayComponent.computeSize()}draw(e,t,n,o,i){this.textDisplayComponent.draw(e,t,n,o,i)}}class u extends t.ControlWidget{constructor(e,n,o){super(e,n,o);const i=o?.parameter?.defaultValue||"",a=o?.parameter?.datatype?.typeName||"",r=new t.ColorGenerator(a);this.textInputComponent=new t.SingleLineTextInputComponent(e,i,r),this.on("valueChanged",((e,t)=>{this.textInputComponent.text=e})),this.textInputComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.textInputComponent.computeSize()}mouse(e,t,n){this.textInputComponent.onMouse(e,t)}draw(e,t,n,o,i){this.textInputComponent.draw(e,t,n,o,i)}}class m extends t.DisplayWidget{constructor(e,n,o){super(e,n,o);const i=o?.content?.defaultValue||"",a=o?.content?.datatype?.typeName||"",r=new t.ColorGenerator(a);this.textDisplayComponent=new t.SingleLineTextDisplayComponent(e,i,r),this.on("valueChanged",((e,t)=>{this.textDisplayComponent.text=e}))}computeSize(){return this.textDisplayComponent.computeSize()}draw(e,t,n,o,i){this.textDisplayComponent.draw(e,t,n,o,i)}}class d extends t.ControlWidget{constructor(e,n,o){super(e,n,o);const i=o?.parameter?.defaultValue||"",a=o?.parameter?.datatype?.enumerations||[],r=o?.parameter?.datatype?.typeName||"",s=new t.ColorGenerator(r);this.comboboxComponent=new t.ComboboxComponent(e,i,a,s),this.on("valueChanged",((e,t)=>{this.comboboxComponent.selection=e})),this.comboboxComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.comboboxComponent.computeSize()}mouse(e,t,n){this.comboboxComponent.onMouse(e,t)}draw(e,t,n,o,i){this.comboboxComponent.draw(e,t,n,o,i)}}e.IecDatatypesPack=class{install(e=new t.GraphFramework,n){this.registerWidgets(e,n)}registerWidgets(e,t){e.registerWidgetType(o,"BOOL"),e.registerWidgetType(n,"BOOL"),e.registerWidgetType(s,"BYTE"),e.registerWidgetType(r,"BYTE"),e.registerWidgetType(s,"WORD"),e.registerWidgetType(r,"WORD"),e.registerWidgetType(s,"DWORD"),e.registerWidgetType(r,"DWORD"),e.registerWidgetType(s,"LWORD"),e.registerWidgetType(r,"LWORD"),e.registerWidgetType(s,"INT"),e.registerWidgetType(r,"INT"),e.registerWidgetType(s,"LINT"),e.registerWidgetType(r,"LINT"),e.registerWidgetType(s,"DINT"),e.registerWidgetType(r,"DINT"),e.registerWidgetType(s,"SINT"),e.registerWidgetType(r,"SINT"),e.registerWidgetType(s,"USINT"),e.registerWidgetType(r,"USINT"),e.registerWidgetType(s,"UINT"),e.registerWidgetType(r,"UINT"),e.registerWidgetType(s,"UDINT"),e.registerWidgetType(r,"UDINT"),e.registerWidgetType(s,"ULINT"),e.registerWidgetType(r,"ULINT"),e.registerWidgetType(s,"REAL"),e.registerWidgetType(r,"REAL"),e.registerWidgetType(s,"LREAL"),e.registerWidgetType(r,"LREAL"),e.registerWidgetType(u,"STRING"),e.registerWidgetType(p,"STRING"),e.registerWidgetType(d,"ENUM","*"),e.registerWidgetType(m,"ENUM","*")}},Object.defineProperty(e,"__esModule",{value:!0})}));
