/**
 * MIT License
 *
 * Copyright (c) 2024 benhar-dev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

import{DisplayWidget as e,ColorGenerator as t,LedComponent as n,ControlWidget as a,CheckboxComponent as i,NumberLimiter as o,NumericDisplayComponent as r,NumericInputComponent as s,SingleLineTextDisplayComponent as p,SingleLineTextInputComponent as u,ComboboxComponent as m,GraphFramework as d}from"mobject-graph-ui";class g extends e{constructor(e,a,i){super(e,a,i);const o=i?.content?.defaultValue||!1,r=new t(i?.content?.datatype?.typeName||"");this.ledComponent=new n(e,o,r),this.on("valueChanged",((e,t)=>{this.ledComponent.isActive=e}))}computeSize(){return this.ledComponent.computeSize()}draw(e,t,n,a,i){this.ledComponent.draw(e,t,n,a,i)}}class c extends a{constructor(e,n,a){super(e,n,a);const o=a?.parameter?.defaultValue||!1,r=new t(a?.parameter?.datatype?.typeName||"");this.checkboxComponent=new i(e,o,r),this.on("valueChanged",((e,t)=>{this.checkboxComponent.isChecked=e})),this.checkboxComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.checkboxComponent.computeSize()}mouse(e,t,n){this.checkboxComponent.onMouse(e,t)}draw(e,t,n,a,i){this.checkboxComponent.draw(e,t,n,a,i)}}class h{constructor(e){this.content=e,this.metadata=new Map((e.metadata??[]).map((e=>[e.name.toLowerCase(),e.value]))),this.datatype=e.datatype||{}}get precision(){return this.getMetadataOrDefault("precision",this.datatype.isFloat?2:0)}get defaultValue(){return this.content?.defaultValue||0}getMetadataOrDefault(e,t){return this.metadata.get(e.toLowerCase())||t}}class l{constructor(e){this.parameter=e,this.metadata=new Map((e.metadata??[]).map((e=>[e.name.toLowerCase(),e.value]))),this.datatype=e.datatype||{}}get minimumValue(){return this.getMetadataOrDefault("minimumValue",this.datatype.minValue||0)}get maximumValue(){return this.getMetadataOrDefault("maximumValue",this.datatype.maxValue||0)}get precision(){return this.getMetadataOrDefault("precision",this.datatype.isFloat?2:0)}get onlyOdd(){return this.getMetadataOrDefault("onlyOdd",!1)}get onlyEven(){return this.getMetadataOrDefault("onlyEven",!1)}get defaultValue(){return this.parameter.defaultValue}getMetadataOrDefault(e,t){return this.metadata.get(e.toLowerCase())||t}getNumberLimiter(){let e=null;return this.onlyOdd?e="odd":this.onlyEven&&(e="even"),new o(this.minimumValue,this.maximumValue,this.defaultValue,e,this.precision)}}class y extends e{constructor(e,n,a){super(e,n,a);const i=new h(a.content),o=i.defaultValue,s=i.precision,p=new t(a?.content?.datatype?.typeName||"");this.numericDisplayComponent=new r(e,o,s,p),this.on("valueChanged",((e,t)=>{this.numericDisplayComponent.value=e}))}computeSize(){return this.numericDisplayComponent.computeSize()}draw(e,t,n,a,i){this.numericDisplayComponent.draw(e,t,n,a,i)}}class C extends a{constructor(e,n,a){super(e,n,a);const i=new l(a.parameter),o=i.defaultValue,r=i.precision,p=i.getNumberLimiter(),u=new t(a?.parameter?.datatype?.typeName||"");this.numericInputComponent=new s(e,o,r,p,u),this.on("valueChanged",((e,t)=>{this.numericInputComponent.value=e})),this.numericInputComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.numericInputComponent.computeSize()}mouse(e,t,n){this.numericInputComponent.onMouse(e,t,n)}draw(e,t,n,a,i){this.numericInputComponent.draw(e,t,n,a,i)}}class T extends e{constructor(e,n,a){super(e,n,a);const i=a?.content?.defaultValue||"",o=new t(a?.content?.datatype?.typeName||"");this.textDisplayComponent=new p(e,i,o),this.on("valueChanged",((e,t)=>{this.textDisplayComponent.text=e}))}computeSize(){return this.textDisplayComponent.computeSize()}draw(e,t,n,a,i){this.textDisplayComponent.draw(e,t,n,a,i)}}class w extends a{constructor(e,n,a){super(e,n,a);const i=a?.parameter?.defaultValue||"",o=new t(a?.parameter?.datatype?.typeName||"");this.textInputComponent=new u(e,i,o),this.on("valueChanged",((e,t)=>{this.textInputComponent.text=e})),this.textInputComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.textInputComponent.computeSize()}mouse(e,t,n){this.textInputComponent.onMouse(e,t)}draw(e,t,n,a,i){this.textInputComponent.draw(e,t,n,a,i)}}class x extends e{constructor(e,n,a){super(e,n,a);const i=a?.content?.defaultValue||"",o=new t(a?.content?.datatype?.typeName||"");this.textDisplayComponent=new p(e,i,o),this.on("valueChanged",((e,t)=>{this.textDisplayComponent.text=e}))}computeSize(){return this.textDisplayComponent.computeSize()}draw(e,t,n,a,i){this.textDisplayComponent.draw(e,t,n,a,i)}}class W extends a{constructor(e,n,a){super(e,n,a);const i=a?.parameter?.defaultValue||"",o=a?.parameter?.datatype?.enumerations||[],r=new t(a?.parameter?.datatype?.typeName||"");this.comboboxComponent=new m(e,i,o,r),this.on("valueChanged",((e,t)=>{this.comboboxComponent.selection=e})),this.comboboxComponent.on("onChange",(e=>{this.value=e}))}computeSize(){return this.comboboxComponent.computeSize()}mouse(e,t,n){this.comboboxComponent.onMouse(e,t)}draw(e,t,n,a,i){this.comboboxComponent.draw(e,t,n,a,i)}}class D{install(e=new d,t){this.registerWidgets(e,t)}registerWidgets(e,t){e.registerWidgetType(c,"BOOL"),e.registerWidgetType(g,"BOOL"),e.registerWidgetType(C,"BYTE"),e.registerWidgetType(y,"BYTE"),e.registerWidgetType(C,"WORD"),e.registerWidgetType(y,"WORD"),e.registerWidgetType(C,"DWORD"),e.registerWidgetType(y,"DWORD"),e.registerWidgetType(C,"LWORD"),e.registerWidgetType(y,"LWORD"),e.registerWidgetType(C,"INT"),e.registerWidgetType(y,"INT"),e.registerWidgetType(C,"LINT"),e.registerWidgetType(y,"LINT"),e.registerWidgetType(C,"DINT"),e.registerWidgetType(y,"DINT"),e.registerWidgetType(C,"SINT"),e.registerWidgetType(y,"SINT"),e.registerWidgetType(C,"USINT"),e.registerWidgetType(y,"USINT"),e.registerWidgetType(C,"UINT"),e.registerWidgetType(y,"UINT"),e.registerWidgetType(C,"UDINT"),e.registerWidgetType(y,"UDINT"),e.registerWidgetType(C,"ULINT"),e.registerWidgetType(y,"ULINT"),e.registerWidgetType(C,"REAL"),e.registerWidgetType(y,"REAL"),e.registerWidgetType(C,"LREAL"),e.registerWidgetType(y,"LREAL"),e.registerWidgetType(w,"STRING"),e.registerWidgetType(T,"STRING"),e.registerWidgetType(W,"ENUM","*"),e.registerWidgetType(x,"ENUM","*")}}export{D as IecDatatypesPack};
